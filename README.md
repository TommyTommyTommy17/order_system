出荷・実績管理システム 設計図 (v1.0)
このシステムは、社内の「出荷予定」をカレンダー形式で管理し、実際の「出荷実績」から複雑な単価計算を行って「実績管理表」を自動生成するものです。
1. システム構成（アーキテクチャ）
  Webフレームワーク: Python / Django
  データベース: SQLite (db.sqlite3)
  開発環境: Docker (Windows/macOS対応)
  バージョン管理: GitHub (メインブランチ: main)
2. データモデル (主要4テーブル)各テーブルは「契約NO (issue_no)」をキーにして相互に関連しています。
  テーブル名	役割	主な項目
  Order	受注案件の親データ	現場名、得意先、販売単価、夜間フラグ、23区外フラグ
  Shipment毎日の出荷実績レコード出荷日、出荷量($\text{6.0}$ 基準)、車両番号
  OrderPlan予定ボード上の台数計画予定日、セクション(EL/他)、予定台数 ($k$)
  UnitPriceMaster	計算用の単価マスタ	区分(昼間/夜間/空積)、項目名、仕切り価格
3. コアロジック：実績集計 ($N/k$ 計算)
   実績管理表の自動生成において、以下の計算式で「回転数」と「回数」を算出します。
   前提条件:
   $N$: 該当日の該当契約の実績レコード数
   $k$: 該当日の予定台数の合計
   $Q, R$: $N \div k$ の商と余り
   計算式:
   グループ1の回転数: $L = \lceil N / k \rceil$ (切り上げ)
   グループ2の回転数: $M = \lfloor N / k \rfloor$ (切り捨て)
   グループ1の回数: $X = (Q + 1) \times R$
   グループ2の回数: $Y = Q \times (k - R)$
   不足分処理:
   各実績が $\text{6.0}$ ㎥を下回る場合、その差分を「空積割増」として計上します。
4. 主要な画面機能
   出荷予定管理ボード (schedule_board.html):
   7日間のグリッド表示。独自ズーム機能（1〜4段階）と Ctrl+ホイールによる拡大縮小を実装。
   出荷入力画面 (shipment_form.html):
   受注データから現場情報を自動引用し、本日の累計数量などをリアルタイムに表示。
   単価マスタ設定 (master_setting.html):
   「昼間 3回転」などの仕切り価格をWeb画面から一括更新可能。
   実績管理表 (daily_report.html):
   A4縦サイズでの印刷を想定。$N/k$ ロジックに基づいた金額算出結果を表示。
5. 今後の拡張予定（メモ）
  費用連動: 高速費用、23区外割増、距離割増（200km超）の自動計算。
  進捗表示: スケジュールボード上での「出荷完了」ステータスの色付け。
  マスタ取り込み: Excel（CSV）からの単価マスタ一括インポート機能。
